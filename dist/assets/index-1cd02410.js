import{r as c,a as ie,R as ce}from"./react-b1791c80.js";import{G as w,a as $}from"./vendor-9697875a.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const g of a.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&n(g)}).observe(document,{childList:!0,subtree:!0});function h(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=h(r);fetch(r.href,a)}})();var U={exports:{}},O={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var le=c,de=Symbol.for("react.element"),ue=Symbol.for("react.fragment"),me=Object.prototype.hasOwnProperty,xe=le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ge={key:!0,ref:!0,__self:!0,__source:!0};function G(t,s,h){var n,r={},a=null,g=null;h!==void 0&&(a=""+h),s.key!==void 0&&(a=""+s.key),s.ref!==void 0&&(g=s.ref);for(n in s)me.call(s,n)&&!ge.hasOwnProperty(n)&&(r[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)r[n]===void 0&&(r[n]=s[n]);return{$$typeof:de,type:t,key:a,ref:g,props:r,_owner:xe.current}}O.Fragment=ue;O.jsx=G;O.jsxs=G;U.exports=O;var e=U.exports,V={},q=ie;V.createRoot=q.createRoot,V.hydrateRoot=q.hydrateRoot;function Q(t){return w({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"}}]})(t)}function F(t){return w({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(t)}function pe(t){return w({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(t)}function he(t){return w({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"}}]})(t)}function fe(t){return w({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M61.77 401l17.5-20.15a19.92 19.92 0 0 0 5.07-14.19v-3.31C84.34 356 80.5 352 73 352H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8h22.83a157.41 157.41 0 0 0-11 12.31l-5.61 7c-4 5.07-5.25 10.13-2.8 14.88l1.05 1.93c3 5.76 6.29 7.88 12.25 7.88h4.73c10.33 0 15.94 2.44 15.94 9.09 0 4.72-4.2 8.22-14.36 8.22a41.54 41.54 0 0 1-15.47-3.12c-6.49-3.88-11.74-3.5-15.6 3.12l-5.59 9.31c-3.72 6.13-3.19 11.72 2.63 15.94 7.71 4.69 20.38 9.44 37 9.44 34.16 0 48.5-22.75 48.5-44.12-.03-14.38-9.12-29.76-28.73-34.88zM496 224H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM16 160h64a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H64V40a8 8 0 0 0-8-8H32a8 8 0 0 0-7.14 4.42l-8 16A8 8 0 0 0 24 64h8v64H16a8 8 0 0 0-8 8v16a8 8 0 0 0 8 8zm-3.91 160H80a8 8 0 0 0 8-8v-16a8 8 0 0 0-8-8H41.32c3.29-10.29 48.34-18.68 48.34-56.44 0-29.06-25-39.56-44.47-39.56-21.36 0-33.8 10-40.46 18.75-4.37 5.59-3 10.84 2.8 15.37l8.58 6.88c5.61 4.56 11 2.47 16.12-2.44a13.44 13.44 0 0 1 9.46-3.84c3.33 0 9.28 1.56 9.28 8.75C51 248.19 0 257.31 0 304.59v4C0 316 5.08 320 12.09 320z"}}]})(t)}function be(t){return w({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"}}]})(t)}function ve(t){return w({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"}}]})(t)}function je(t){return w({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M480 160H32c-17.673 0-32-14.327-32-32V64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm112 248H32c-17.673 0-32-14.327-32-32v-64c0-17.673 14.327-32 32-32h448c17.673 0 32 14.327 32 32v64c0 17.673-14.327 32-32 32zm-48-88c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24zm-64 0c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24z"}}]})(t)}function H(t){return w({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}}]})(t)}function P(t){return w({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(t)}function Ne(t){return w({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128 70.741 0 128 57.249 128 128 0 70.741-57.249 128-128 128-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128 0 70.74-57.249 128-128 128z"}}]})(t)}function ye(t){return w({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128 0-70.8 57.3-128 128-128 70.8 0 128 57.3 128 128 0 70.8-57.3 128-128 128z"}}]})(t)}function we(t){return w({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(t)}const Ce=({question:t,questionType:s,onAnswer:h,isAnswered:n,userAnswer:r,isCorrect:a,feedback:g,isLoading:v})=>{const[b,E]=c.useState(""),[z,m]=c.useState("");c.useEffect(()=>{E(""),m("")},[t]);const N=l=>{l.preventDefault(),h(s==="open-ended"?z:b)},C=()=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:t.question}),e.jsx("div",{className:"space-y-2",children:t.options.map((l,y)=>{const x=String.fromCharCode(97+y),p=b===x,L=n&&t.correctAnswer===x;return e.jsxs("div",{className:`p-3 rounded-lg border flex items-center cursor-pointer transition-all ${n?L?"bg-green-50 border-green-300":p?"bg-red-50 border-red-300":"border-gray-200":p?"bg-indigo-50 border-indigo-300":"border-gray-200 hover:border-indigo-200 hover:bg-indigo-50"}`,onClick:()=>!n&&E(x),children:[e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center mr-3 ${n?L?"bg-green-500 text-white":p?"bg-red-500 text-white":"bg-gray-200 text-gray-700":p?"bg-indigo-500 text-white":"bg-gray-200 text-gray-700"}`,children:x}),e.jsx("span",{className:"flex-grow",children:l}),n&&(L?e.jsx(F,{className:"text-green-500"}):p?e.jsx(P,{className:"text-red-500"}):null)]},y)})}),!n&&e.jsxs("button",{onClick:N,disabled:!b||v,className:"mt-4 w-full py-2 rounded-lg bg-indigo-600 text-white disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center",children:[v?e.jsx(H,{className:"animate-spin mr-2"}):null,"Verificar Respuesta"]}),n&&e.jsxs("div",{className:`mt-4 p-4 rounded-lg ${a?"bg-green-50":"bg-red-50"}`,children:[e.jsx("div",{className:"font-medium mb-2 flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"text-green-500 mr-2"})," ¡Correcto! 👏"]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"text-red-500 mr-2"})," Incorrecto 😕"]})}),e.jsx("p",{children:g||t.explanation})]})]}),f=()=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:t.statement}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["true","false"].map(l=>{const y=b===l,x=l==="true",p=t.isTrue===!0||t.isTrue==="true",L=x===p,M=n&&L,k=n&&y&&!L;return e.jsxs("div",{className:`p-3 rounded-lg border flex items-center justify-center cursor-pointer transition-all ${n?M?"bg-green-50 border-green-300":k?"bg-red-50 border-red-300":"border-gray-200":y?"bg-indigo-50 border-indigo-300":"border-gray-200 hover:border-indigo-200 hover:bg-indigo-50"}`,onClick:()=>!n&&E(l),children:[e.jsx("span",{className:"font-medium",children:l==="true"?"Verdadero":"Falso"}),n&&(M?e.jsx(F,{className:"text-green-500 ml-2"}):k?e.jsx(P,{className:"text-red-500 ml-2"}):null)]},l)})}),!n&&e.jsxs("button",{onClick:N,disabled:!b||v,className:"mt-4 w-full py-2 rounded-lg bg-indigo-600 text-white disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center",children:[v?e.jsx(H,{className:"animate-spin mr-2"}):null,"Verificar Respuesta"]}),n&&e.jsxs("div",{className:`mt-4 p-4 rounded-lg ${a?"bg-green-50":"bg-red-50"}`,children:[e.jsx("div",{className:"font-medium mb-2 flex items-center",children:a?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"text-green-500 mr-2"})," ¡Correcto! 👏"]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"text-red-500 mr-2"})," Incorrecto 😕"]})}),e.jsx("p",{children:g||t.explanation})]})]}),T=()=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:t.question}),e.jsxs("form",{onSubmit:N,children:[e.jsx("div",{className:"mb-3",children:e.jsx("textarea",{value:z,onChange:l=>m(l.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none",rows:"5",placeholder:"Escribe tu respuesta aquí...",disabled:n})}),!n&&e.jsxs("button",{type:"submit",disabled:!z.trim()||v,className:"w-full py-2 rounded-lg bg-indigo-600 text-white disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center",children:[v?e.jsx(H,{className:"animate-spin mr-2"}):null,"Enviar Respuesta"]})]}),n&&e.jsxs("div",{className:`mt-4 p-4 rounded-lg ${a?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:[e.jsx("div",{className:"font-medium mb-2",children:a?"¡Bien hecho! 👏":"Puede mejorar 🤔"}),e.jsx("p",{className:"mb-3",children:g}),e.jsxs("div",{className:"mt-4 p-3 bg-white rounded border border-gray-200",children:[e.jsx("h4",{className:"font-medium text-sm text-gray-600 mb-1",children:"Respuesta modelo:"}),e.jsx("p",{className:"text-sm",children:t.modelAnswer})]})]})]});switch(s){case"multiple-choice":return C();case"true-false":return f();case"open-ended":return T();default:return e.jsx("div",{children:"Tipo de pregunta no soportado"})}},Ee=()=>{const[t,s]=c.useState("initial"),[h,n]=c.useState(""),[r,a]=c.useState("multiple-choice"),[g,v]=c.useState(5),[b,E]=c.useState(null),[z,m]=c.useState(""),[N,C]=c.useState(!1),[f,T]=c.useState(null),[l,y]=c.useState(0),[x,p]=c.useState([]),[L,M]=c.useState(""),[k,A]=c.useState(""),B=c.useRef(null),X=d=>{const i=d.target.files[0];if(i)if(E(i),i.type.startsWith("image/")){const u=new FileReader;u.onload=o=>m(o.target.result),u.readAsDataURL(i)}else m("")},Y=()=>{s("config")},J=async()=>{var d,i;if(!h&&!b){A("Por favor ingresa un tema o sube un documento");return}A(""),C(!0),s("loading");try{const u=new FormData;u.append("topic",h),u.append("questionType",r),u.append("questionCount",g),b&&u.append("document",b);const o=await $.post("https://backend-gemini-one.vercel.app/api/chat/quiz",u,{headers:{"Content-Type":"multipart/form-data"}});M(o.data.sessionId),T(o.data.quiz),s("quiz")}catch(u){console.error("Error al generar el cuestionario:",u),A(((i=(d=u.response)==null?void 0:d.data)==null?void 0:i.error)||"Error al conectar con el servidor. Por favor verifica que el backend esté funcionando."),s("config")}finally{C(!1)}},K=async d=>{C(!0);try{const i=f.questions[l],u={sessionId:L,questionIndex:l,userAnswer:d,question:i,questionType:r};r==="multiple-choice"?u.correctAnswer=i.correctAnswer:r==="true-false"&&(u.correctAnswer=i.isTrue?"true":"false");let o=0;const j=3;let S;for(;o<j;)try{S=await $.post("https://backend-gemini-one.vercel.app/api/chat/validate",u);break}catch(R){if(o++,console.log(`Intento ${o}/${j} fallido`),o>=j)throw R;const ne=1e3*Math.pow(2,o);await new Promise(ae=>setTimeout(ae,ne))}S.data.fallbackResponse&&(S.data=S.data.fallbackResponse);const I=[...x];I[l]={userAnswer:d,...S.data},p(I),l<f.questions.length-1?setTimeout(()=>{y(l+1),C(!1)},1500):setTimeout(()=>{s("results"),C(!1)},1500)}catch(i){console.error("Error al validar la respuesta:",i);const u=f.questions[l];let o;if(r==="multiple-choice"){const S=d===u.correctAnswer;o={isCorrect:S,feedback:S?"¡Correcto! 👏 (Validación local debido a un problema de conexión)":"Incorrecto. 😕 (Validación local debido a un problema de conexión)"}}else if(r==="true-false"){const S=d.toLowerCase()==="true",I=u.isTrue===!0||u.isTrue==="true",R=S===I;o={isCorrect:R,feedback:R?"¡Correcto! 👏 (Validación local debido a un problema de conexión)":`Incorrecto. 😕 La respuesta correcta es ${I?"Verdadero":"Falso"}. (Validación local debido a un problema de conexión)`}}else o={isCorrect:null,score:null,feedback:"No se pudo conectar con el sistema de evaluación. Por favor, compara tu respuesta con la respuesta modelo. 🔍"};const j=[...x];j[l]={userAnswer:d,...o},p(j),A("Hubo un problema al validar tu respuesta. Se ha utilizado validación local."),l<f.questions.length-1?setTimeout(()=>{y(l+1),C(!1)},1500):setTimeout(()=>{s("results"),C(!1)},1500)}},D=()=>{n(""),a("multiple-choice"),v(5),E(null),m(""),T(null),y(0),p([]),M(""),A(""),s("initial")},Z=()=>{if(!x.length)return 0;const d=x.filter(i=>i.isCorrect).length;return Math.round(d/x.length*100)},_=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-8 py-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-2xl font-bold text-indigo-700 mb-4",children:[e.jsx(Q,{className:"inline-block mr-2"})," Asistente de Estudio"]}),e.jsx("p",{className:"text-indigo-600 max-w-md",children:"Crea cuestionarios personalizados para estudiar cualquier tema. Sube un documento o simplemente escribe el tema que deseas estudiar."})]}),e.jsxs("button",{onClick:Y,className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-8 py-3 rounded-lg font-medium hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg flex items-center","aria-label":"Empezar a estudiar","data-cursor-pointer":!0,children:[e.jsx(ve,{className:"mr-2"})," Empezar a Estudiar"]})]}),ee=()=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-indigo-700 mb-6 flex items-center",children:[e.jsx(Q,{className:"mr-2"})," Configurar Cuestionario"]}),k&&e.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4",children:k}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-indigo-700 font-medium mb-2",children:"Tema de estudio"}),e.jsx("input",{type:"text",value:h,onChange:d=>n(d.target.value),placeholder:"Ej: Historia de América, Matemáticas, Filosofía...",className:"w-full p-3 border border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-indigo-700 font-medium mb-2",children:"Documento (opcional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",ref:B,onChange:X,className:"hidden",accept:".pdf,.doc,.docx"}),e.jsxs("button",{onClick:()=>B.current.click(),className:"w-full p-3 border border-dashed border-indigo-400 rounded-lg text-indigo-600 hover:bg-indigo-50 transition-colors flex items-center justify-center","data-cursor-pointer":!0,children:[e.jsx(we,{className:"mr-2"}),b?b.name:"Seleccionar archivo (PDF o Word)"]})]}),z&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:z,alt:"Vista previa",className:"max-h-32 rounded-lg border border-indigo-200"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-indigo-700 font-medium mb-2",children:"Tipo de preguntas"}),e.jsxs("select",{value:r,onChange:d=>a(d.target.value),className:"w-full p-3 border border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"multiple-choice",children:"Opción múltiple (a, b, c, d)"}),e.jsx("option",{value:"true-false",children:"Verdadero o Falso"}),e.jsx("option",{value:"open-ended",children:"Preguntas abiertas"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-indigo-700 font-medium mb-2",children:"Número de preguntas"}),e.jsx("select",{value:g,onChange:d=>v(parseInt(d.target.value)),className:"w-full p-3 border border-indigo-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[3,5,7,10].map(d=>e.jsxs("option",{value:d,children:[d," preguntas"]},d))})]})]}),e.jsxs("div",{className:"mt-8 flex space-x-3",children:[e.jsx("button",{onClick:()=>s("initial"),className:"px-4 py-2 border border-indigo-300 text-indigo-600 rounded-lg hover:bg-indigo-50 transition-colors","data-cursor-pointer":!0,children:"Cancelar"}),e.jsxs("button",{onClick:J,className:"flex-grow bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg flex items-center justify-center","data-cursor-pointer":!0,children:[e.jsx(fe,{className:"mr-2"})," Generar Cuestionario"]})]})]}),te=()=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx("div",{className:"mb-6",children:e.jsx(H,{className:"animate-spin text-indigo-600 text-4xl"})}),e.jsx("h3",{className:"text-xl font-bold text-indigo-700 mb-2",children:"Generando tu cuestionario"}),e.jsx("p",{className:"text-indigo-600 text-center max-w-md",children:"Estoy analizando el tema y creando preguntas personalizadas para ti. Este proceso puede tomar unos momentos..."})]}),re=()=>{if(!f||!f.questions||f.questions.length===0)return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-red-600 font-bold",children:"Error al generar el cuestionario"}),e.jsx("p",{className:"mt-2",children:"No se pudieron generar preguntas. Por favor intenta con otro tema."}),e.jsx("button",{onClick:D,className:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded-lg",children:"Volver a intentar"})]});const d=f.questions[l],i=x[l],u=i!==void 0;return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-4 rounded-t-xl text-white flex items-center justify-between",children:[e.jsxs("h3",{className:"font-bold",children:["Pregunta ",l+1," de ",f.questions.length]}),e.jsx("span",{className:"bg-white text-indigo-700 px-3 py-1 rounded-full text-sm font-medium",children:r==="multiple-choice"?"Opción Múltiple":r==="true-false"?"Verdadero/Falso":"Pregunta Abierta"})]}),e.jsxs("div",{className:"p-6",children:[e.jsx(Ce,{question:d,questionType:r,onAnswer:K,isAnswered:u,userAnswer:i==null?void 0:i.userAnswer,isCorrect:i==null?void 0:i.isCorrect,feedback:i==null?void 0:i.feedback,isLoading:N}),e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-indigo-600",children:u?`${l+1===f.questions.length?"Última pregunta":"Siguiente pregunta en breve..."}`:"Responde a la pregunta para continuar"}),e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(f.questions.length)].map((o,j)=>e.jsx("span",{className:`w-3 h-3 rounded-full ${j===l?"bg-indigo-600":x[j]?x[j].isCorrect?"bg-green-500":"bg-red-500":"bg-indigo-200"}`},j))})]})]})]})},se=()=>{const d=Z();return e.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-center mb-6",children:"Resultados del Cuestionario"}),e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("div",{className:`rounded-full p-4 ${d>=70?"bg-green-100 text-green-600":d>=40?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}`,children:e.jsxs("span",{className:"text-4xl font-bold",children:[d,"%"]})})}),e.jsx("div",{className:"space-y-4 mb-8",children:f.questions.map((i,u)=>{const o=x[u];let j="";return!(o!=null&&o.isCorrect)&&r==="multiple-choice"?j=`${i.correctAnswer}) ${i.options[i.correctAnswer.charCodeAt(0)-97]}`:!(o!=null&&o.isCorrect)&&r==="true-false"&&(j=i.isTrue?"Verdadero":"Falso"),e.jsx("div",{className:`p-4 rounded-lg border ${o!=null&&o.isCorrect?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"mr-3 mt-1",children:o!=null&&o.isCorrect?e.jsx("span",{className:"text-green-500",children:"✓"}):e.jsx("span",{className:"text-red-500",children:"✗"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:r==="true-false"?i.statement:i.question}),e.jsxs("div",{className:"mt-1 text-sm",children:[e.jsx("span",{className:"font-medium",children:"Tu respuesta:"})," ",(o==null?void 0:o.userAnswer)==="true"?"Verdadero":(o==null?void 0:o.userAnswer)==="false"?"Falso":o==null?void 0:o.userAnswer]}),!(o!=null&&o.isCorrect)&&e.jsxs("div",{className:"mt-1 text-sm text-green-700",children:[e.jsx("span",{className:"font-medium",children:"Respuesta correcta:"})," ",j]}),e.jsx("div",{className:"mt-2 text-sm border-t border-gray-200 pt-2",children:r==="open-ended"?o==null?void 0:o.feedback:i.explanation})]})]})},u)})}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:D,className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-2 rounded-lg font-medium hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg",children:"Crear Nuevo Cuestionario"})})]})},oe=()=>{switch(t){case"initial":return _();case"config":return ee();case"loading":return te();case"quiz":return re();case"results":return se();default:return _()}};return e.jsx("div",{className:"max-w-2xl mx-auto prevent-cursor-issues",children:oe()})},ze=()=>e.jsx("header",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 shadow-md py-4 px-6",children:e.jsxs("div",{className:"container mx-auto flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(he,{className:"text-3xl text-white"}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Study Buddy"})]}),e.jsx("div",{className:"text-sm text-indigo-100 mt-1",children:"Hecho con ❤️ por Miguel Gomez"})]})}),Se=()=>{const[t,s]=c.useState({x:0,y:0}),[h,n]=c.useState(!1),[r,a]=c.useState(!1),[g,v]=c.useState("default"),[b,E]=c.useState(!1);if(c.useEffect(()=>{const m=x=>{b||(s({x:x.clientX,y:x.clientY}),n(!0))},N=()=>a(!0),C=()=>{a(!1),E(!0),setTimeout(()=>E(!1),100)},f=()=>n(!1),T=()=>n(!0),l=x=>{const p=x.target;p.tagName==="BUTTON"||p.tagName==="A"||p.role==="button"||p.classList.contains("cursor-pointer")?v("pointer"):p.tagName==="INPUT"||p.tagName==="TEXTAREA"||p.contentEditable==="true"?v("text"):v("default")};window.addEventListener("mousemove",m),window.addEventListener("mousedown",N),window.addEventListener("mouseup",C),document.addEventListener("mouseleave",f),document.addEventListener("mouseenter",T),document.addEventListener("mouseover",l),document.body.style.cursor="none";const y=document.createElement("style");return y.innerHTML=`
      * {
        cursor: none !important;
      }
    `,document.head.appendChild(y),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mousedown",N),window.removeEventListener("mouseup",C),document.removeEventListener("mouseleave",f),document.removeEventListener("mouseenter",T),document.removeEventListener("mouseover",l),document.body.style.cursor="auto",document.head.removeChild(y)}},[b]),!h)return null;const z=()=>{const m={position:"fixed",pointerEvents:"none",zIndex:9999,transform:"translate(-50%, -50%)",transition:r?"none":"all 0.05s linear",top:t.y,left:t.x};switch(g){case"pointer":return{...m,width:r?"24px":"28px",height:r?"24px":"28px",backgroundColor:"rgba(99, 102, 241, 0.2)",border:"2px solid rgba(99, 102, 241, 0.8)",borderRadius:"50%"};case"text":return{...m,width:"3px",height:"24px",backgroundColor:"#6366f1",borderRadius:"1px",opacity:r?.5:.8};default:return{...m,width:r?"8px":"12px",height:r?"8px":"12px",backgroundColor:r?"#4F46E5":"#6366f1",borderRadius:"50%",opacity:.8}}};return e.jsxs(e.Fragment,{children:[g==="pointer"&&e.jsx("div",{style:{...z(),backgroundColor:"rgba(99, 102, 241, 0.1)",width:"40px",height:"40px",border:"2px solid rgba(99, 102, 241, 0.3)",borderRadius:"50%"}}),e.jsx("div",{style:z()})]})},W=t=>{t?document.body.classList.add("custom-cursor-enabled"):document.body.classList.remove("custom-cursor-enabled")},Le=()=>{document.addEventListener("selectstart",s=>{s.target.tagName!=="INPUT"&&s.target.tagName!=="TEXTAREA"&&s.target.contentEditable!=="true"&&s.preventDefault()});let t;document.addEventListener("mousemove",()=>{document.body.classList.add("cursor-moving"),clearTimeout(t),t=setTimeout(()=>{document.body.classList.remove("cursor-moving")},100)}),document.addEventListener("mouseover",s=>{document.body.classList.contains("custom-cursor-enabled")&&getComputedStyle(s.target).cursor!=="none"&&(s.target.dataset.originalCursor=getComputedStyle(s.target).cursor,s.target.style.cursor="none")})},Te=()=>{const t=localStorage.getItem("customCursorEnabled")==="true";W(t),Le(),("ontouchstart"in window||navigator.maxTouchPoints>0)&&document.body.classList.add("touch-device")};typeof window<"u"&&window.addEventListener("DOMContentLoaded",Te);const Me=({onToggle:t})=>{const[s,h]=c.useState(!1);c.useEffect(()=>{const r=localStorage.getItem("customCursorEnabled");if(r){const a=r==="true";h(a),t(a)}},[t]);const n=()=>{const r=!s;h(r),localStorage.setItem("customCursorEnabled",r.toString()),W(r),t(r)};return e.jsx("div",{className:"fixed bottom-4 left-4 z-50",children:e.jsxs("button",{onClick:n,className:"flex items-center bg-white border border-indigo-200 px-3 py-2 rounded-lg shadow-md hover:shadow-lg transition-all",title:s?"Desactivar cursor personalizado":"Activar cursor personalizado",children:[e.jsx(be,{className:"text-indigo-600 mr-2"}),e.jsx("span",{className:"text-indigo-700 font-medium mr-1",children:"Cursor:"}),s?e.jsx(ye,{className:"text-2xl text-indigo-600"}):e.jsx(Ne,{className:"text-2xl text-gray-400"})]})})},ke=()=>{const[t,s]=c.useState(null),[h,n]=c.useState(!0),[r,a]=c.useState(null),g=async()=>{try{n(!0);const N=await $.get("https://backend-gemini-one.vercel.app/api/chat/api-status");s(N.data),a(null)}catch(N){a("Error al verificar el estado de la API"),console.error("Error al verificar estado de API:",N)}finally{n(!1)}};if(c.useEffect(()=>{g();const N=setInterval(()=>{g()},3e4);return()=>clearInterval(N)},[]),h&&!t)return null;if(r)return e.jsx("div",{className:"fixed bottom-4 right-4 bg-red-100 text-red-700 px-4 py-2 rounded-lg shadow-md border border-red-200 z-40",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{className:"mr-2"}),e.jsx("span",{children:"Error al verificar el estado del servidor"})]})});if(!t)return null;const{status:v,requestsThisMinute:b,minuteQuota:E,timeToReset:z}=t,m=v==="limited";return e.jsx("div",{className:`fixed bottom-4 right-4 ${m?"bg-amber-100":"bg-green-100"} px-4 py-2 rounded-lg shadow-md border ${m?"border-amber-200":"border-green-200"} z-40`,children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(je,{className:`mr-2 ${m?"text-amber-600":"text-green-600"}`}),e.jsxs("div",{children:[e.jsx("div",{className:`font-medium ${m?"text-amber-700":"text-green-700"}`,children:m?"API: Alta demanda":"API: Disponible"}),e.jsx("div",{className:`text-xs ${m?"text-amber-600":"text-green-600"}`,children:m?`Disponible en ~${Math.ceil(z/1e3)}s`:`Uso: ${b}/${E} solicitudes/min (Flash)`})]})]})})};function Ae(){const[t,s]=c.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-indigo-100 to-purple-100 flex flex-col",children:[t&&e.jsx(Se,{}),e.jsx(Me,{onToggle:s}),e.jsx(ke,{}),e.jsx(ze,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8 flex-1",children:[e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-center text-transparent bg-clip-text bg-gradient-to-r from-indigo-700 to-purple-700 mb-6",children:"Tu Asistente Personal de Estudio"}),e.jsx(Ee,{})]}),e.jsx("p",{className:"text-center text-indigo-600 font-medium text-sm mt-8",children:"Usa el poder de la IA para mejorar tu aprendizaje"})]})]})}try{const t=document.getElementById("root");if(!t)throw new Error("No se encontró el elemento 'root' en el DOM");V.createRoot(t).render(e.jsx(ce.StrictMode,{children:e.jsx(Ae,{})})),console.log("✅ Aplicación React renderizada correctamente")}catch(t){console.error("❌ Error al inicializar la aplicación React:",t);const s=document.getElementById("root")||document.body;s.innerHTML=`
    <div style="padding: 20px; margin: 20px; background-color: #ffdddd; border: 1px solid #ff6b6b; border-radius: 5px;">
      <h2 style="color: #d63031;">Error al inicializar la aplicación</h2>
      <pre style="background: #f8f8f8; padding: 10px; border-radius: 4px; overflow: auto;">${t.message}</pre>
    </div>
  `}
//# sourceMappingURL=index-1cd02410.js.map
